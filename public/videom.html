<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Video Call - Master</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="css/videom.css" />
  </head>
  <body>
    <header class="header">
      <div class="container">
        <div class="header-content">
          <div class="logo">
            <a href="/index.html">
              <img src="/img/logo.png" alt="Logo" />
            </a>
          </div>
          <nav class="nav">
            <ul class="nav-list">
              <li><a href="/index.html">Головна</a></li>
              <li><a href="/services.html">Послуги</a></li>
              <li><a href="/about.html">Про нас</a></li>
              <li><a href="/contact.html">Контакти</a></li>
            </ul>
          </nav>
          <div class="user-actions">
            <a href="/profile.html" class="profile-link">
              <i class="fas fa-user"></i>
              <span id="username-display">Профіль</span>
            </a>
            <button id="logout-btn" class="logout-btn">
              <i class="fas fa-sign-out-alt"></i>
              Вийти
            </button>
          </div>
        </div>
      </div>
    </header>

    <main class="main">
      <div class="container">
        <div class="video-call-container">
          <div id="initial-screen" class="initial-screen">
            <h1>Відеодзвінки - Панель майстра</h1>
            <p>
              Тут ви можете переглянути історію відеодзвінків та приймати вхідні
              дзвінки від користувачів
            </p>
            <div class="master-status">
              <label for="online-status">Статус:</label>
              <select id="online-status">
                <option value="online">Онлайн (доступний для дзвінків)</option>
                <option value="busy">Зайнятий (не приймаю дзвінки)</option>
                <option value="offline">Офлайн (невидимий)</option>
              </select>
            </div>
          </div>

          <div id="call-screen" class="call-screen hidden">
            <div class="call-header">
              <h2>
                Відеодзвінок з <span id="call-user-name">користувачем</span>
              </h2>
              <div class="call-timer" id="call-timer">00:00</div>
            </div>
            <div class="video-container">
              <div class="remote-video-container">
                <video id="remote-video" autoplay playsinline></video>
                <div id="remote-video-placeholder" class="video-placeholder">
                  <i class="fas fa-user"></i>
                  <p>Очікування з'єднання...</p>
                </div>
              </div>
              <div class="local-video-container">
                <video id="local-video" autoplay playsinline muted></video>
                <div id="local-video-placeholder" class="video-placeholder">
                  <i class="fas fa-user"></i>
                </div>
              </div>
            </div>
            <div class="call-controls">
              <button id="toggle-mic-btn" class="control-btn">
                <i class="fas fa-microphone"></i>
              </button>
              <button id="toggle-camera-btn" class="control-btn">
                <i class="fas fa-video"></i>
              </button>
              <button id="end-call-btn" class="control-btn end-call">
                <i class="fas fa-phone-slash"></i>
              </button>
              <button id="toggle-fullscreen-btn" class="control-btn">
                <i class="fas fa-expand"></i>
              </button>
            </div>
            <div id="call-status" class="call-status">З'єднання...</div>
          </div>

          <div id="call-history" class="call-history">
            <h2>Історія відеодзвінків</h2>
            <div class="history-list" id="history-list">
              <!-- Call history will be loaded here -->
              <div class="loading">Завантаження історії дзвінків...</div>
            </div>
          </div>

          <div id="call-notification" class="call-notification hidden">
            <div class="notification-content">
              <h3>Вхідний відеодзвінок</h3>
              <p>
                Користувач <span id="incoming-call-name">Ім'я</span> телефонує
                вам
              </p>
              <div class="notification-buttons">
                <button id="decline-call-btn" class="secondary-btn">
                  Відхилити
                </button>
                <button id="accept-call-btn" class="primary-btn">
                  Прийняти
                </button>
              </div>
            </div>
          </div>
        </div>

        <div class="sidebar">
          <div class="sidebar-section">
            <h3>Швидкі дії</h3>
            <ul class="quick-actions">
              <li>
                <a href="/profile.html" class="action-btn">
                  <i class="fas fa-user-cog"></i> Налаштування профілю
                </a>
              </li>
              <li>
                <a href="/index.html" class="action-btn">
                  <i class="fas fa-home"></i> На головну
                </a>
              </li>
            </ul>
          </div>
          <div class="sidebar-section">
            <h3>Статистика дзвінків</h3>
            <div class="call-stats">
              <div class="stat-item">
                <span class="stat-label">Всього дзвінків:</span>
                <span class="stat-value" id="total-calls">0</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Прийнято:</span>
                <span class="stat-value" id="accepted-calls">0</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Пропущено:</span>
                <span class="stat-value" id="missed-calls">0</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Середня тривалість:</span>
                <span class="stat-value" id="avg-duration">0:00</span>
              </div>
            </div>
          </div>
          <div class="sidebar-section">
            <h3>Інформація</h3>
            <div class="info-content">
              <p>
                Для здійснення відеодзвінка вам необхідно надати доступ до
                камери та мікрофона.
              </p>
              <p>Всі дзвінки записуються в історію для вашої зручності.</p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-logo">
            <img src="/img/logo.png" alt="Logo" />
          </div>
          <div class="footer-links">
            <h4>Навігація</h4>
            <ul>
              <li><a href="/index.html">Головна</a></li>
              <li><a href="/services.html">Послуги</a></li>
              <li><a href="/about.html">Про нас</a></li>
              <li><a href="/contact.html">Контакти</a></li>
            </ul>
          </div>
          <div class="footer-contact">
            <h4>Контакти</h4>
            <p><i class="fas fa-phone"></i> +380 12 345 6789</p>
            <p><i class="fas fa-envelope"></i> info@example.com</p>
            <p><i class="fas fa-map-marker-alt"></i> Київ, Україна</p>
          </div>
          <div class="footer-social">
            <h4>Соціальні мережі</h4>
            <div class="social-icons">
              <a href="#"><i class="fab fa-facebook"></i></a>
              <a href="#"><i class="fab fa-twitter"></i></a>
              <a href="#"><i class="fab fa-instagram"></i></a>
              <a href="#"><i class="fab fa-linkedin"></i></a>
            </div>
          </div>
        </div>
        <div class="footer-bottom">
          <p>&copy; 2023 ProFix Network. Всі права захищені.</p>
        </div>
      </div>
    </footer>

    <audio id="call-ringtone" loop>
      <source src="/sounds/ringtone.mp3" type="audio/mpeg" />
    </audio>
    <audio id="call-end-sound">
      <source src="/sounds/call-end.mp3" type="audio/mpeg" />
    </audio>

    <script src="https://cdn.socket.io/4.6.0/socket.io.min.js"></script>
    <script src="js/videom.js"></script>
  </body>
</html>
