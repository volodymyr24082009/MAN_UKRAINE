<!DOCTYPE html>
<html lang="uk" class="dark">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ú—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å - ProFix Network Hub</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="./css/profile.css">
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="logo"><i class="fas fa-tools"></i> ProFix Network Hub</a>
            <div class="nav-buttons">
                <button onclick="window.location.href='index.html'"><i class="fas fa-home"></i> –ì–æ–ª–æ–≤–Ω–∞</button>
                <button onclick="window.location.href='orders.html'"><i class="fas fa-clipboard-list"></i> –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
                <button class="notification-badge" data-count="0" id="notifications-btn" onclick="window.location.href='notifications.html'"><i class="fas fa-bell"></i> –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è</button>
                <button id="logout"><i class="fas fa-sign-out-alt"></i> –í–∏–π—Ç–∏</button>
            </div>
            <div class="theme-switch-container">
                <label class="theme-switch">
                    <input type="checkbox" id="themeToggle">
                    <span class="slider">
                        <span class="moon">üåô</span>
                        <span class="sun">‚òÄÔ∏è</span>
                    </span>
                </label>
            </div>
        </header>

        <main>
            <div class="profile-header">
                <div class="profile-header-left">
                    <div class="profile-avatar" id="profile-avatar">
                        <span id="avatar-initials"></span>
                        <img id="avatar-image" style="display: none;" alt="Profile Avatar">
                        <div class="profile-avatar-upload" id="avatar-upload">
                            <i class="fas fa-camera"></i> –ó–º—ñ–Ω–∏—Ç–∏
                        </div>
                        <input type="file" id="avatar-input" style="display: none;" accept="image/*">
                    </div>
                    <div class="profile-info">
                        <h1 id="profile-name">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</h1>
                        <p id="profile-username">@username</p>
                    </div>
                </div>
                <div class="profile-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="orders-count">0</div>
                        <div class="stat-label">–ó–∞–º–æ–≤–ª–µ–Ω—å</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="rating-value">0.0</div>
                        <div class="stat-label">–†–µ–π—Ç–∏–Ω–≥</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="reviews-count">0</div>
                        <div class="stat-label">–í—ñ–¥–≥—É–∫—ñ–≤</div>
                    </div>
                </div>
            </div>

            <div class="tabs">
                <div class="tab active" data-tab="profile">–ü—Ä–æ—Ñ—ñ–ª—å</div>
                <div class="tab" data-tab="services">–ü–æ—Å–ª—É–≥–∏</div>
                <div class="tab" data-tab="orders">–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è</div>
                <div class="tab" data-tab="reviews">–í—ñ–¥–≥—É–∫–∏</div>
                <div class="tab" data-tab="settings">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</div>
            </div>

            <div id="tab-profile" class="tab-content active">
                <form id="profile-form">
                    <div class="form-group">
                        <label for="first_name">–Ü–º'—è:</label>
                        <input type="text" id="first_name" name="first_name" required />
                    </div>

                    <div class="form-group">
                        <label for="last_name">–ü—Ä—ñ–∑–≤–∏—â–µ:</label>
                        <input type="text" id="last_name" name="last_name" required />
                    </div>

                    <div class="form-group">
                        <label for="email">–ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –ø–æ—à—Ç–∞:</label>
                        <input type="email" id="email" name="email" required />
                    </div>

                    <div class="form-group">
                        <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                        <input type="text" id="phone" name="phone" required />
                    </div>

                    <div class="form-group">
                        <label for="address">–ê–¥—Ä–µ—Å–∞:</label>
                        <textarea id="address" name="address" required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="date_of_birth">–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è:</label>
                        <input type="date" id="date_of_birth" name="date_of_birth" required />
                    </div>

                    <div class="form-group">
                        <label for="bio">–ü—Ä–æ —Å–µ–±–µ:</label>
                        <textarea id="bio" name="bio" rows="4" placeholder="–†–æ–∑–∫–∞–∂—ñ—Ç—å –ø—Ä–æ —Å–µ–±–µ, —Å–≤—ñ–π –¥–æ—Å–≤—ñ–¥ —Ç–∞ –Ω–∞–≤–∏—á–∫–∏..."></textarea>
                    </div>

                    <label class="checkbox-wrapper">
                        <input type="checkbox" id="role_master" name="role_master" />
                        <span class="checkmark"></span>
                        –Ø –º–∞–π—Å—Ç–µ—Ä
                        <span id="approval-status"></span>
                    </label>

                    <button type="submit"><i class="fas fa-save"></i> –û–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</button>
                </form>
            </div>

            <div id="tab-services" class="tab-content">
                <div id="services" class="visible">
                    <label>–û–±–µ—Ä—ñ—Ç—å –≥–∞–ª—É–∑—å:</label>
                    <div class="service-option"><label class="checkbox-wrapper"><input type="checkbox" name="industry" value="–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó" data-industry="it"><span class="checkmark"></span>–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó</label></div>
                    <div class="service-option"><label class="checkbox-wrapper"><input type="checkbox" name="industry" value="–ú–µ–¥–∏—Ü–∏–Ω–∞" data-industry="medicine"><span class="checkmark"></span>–ú–µ–¥–∏—Ü–∏–Ω–∞</label></div>
                    <div class="service-option"><label class="checkbox-wrapper"><input type="checkbox" name="industry" value="–ï–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞" data-industry="energy"><span class="checkmark"></span>–ï–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞</label></div>
                    <div class="service-option"><label class="checkbox-wrapper"><input type="checkbox" name="industry" value="–ê–≥—Ä–∞—Ä–Ω–∞ –≥–∞–ª—É–∑—å" data-industry="agriculture"><span class="checkmark"></span>–ê–≥—Ä–∞—Ä–Ω–∞ –≥–∞–ª—É–∑—å</label></div>
                    <div class="service-option"><label class="checkbox-wrapper"><input type="checkbox" name="industry" value="–§—ñ–Ω–∞–Ω—Å–∏ —Ç–∞ –±–∞–Ω–∫—ñ–≤—Å—å–∫–∞ —Å–ø—Ä–∞–≤–∞" data-industry="finance"><span class="checkmark"></span>–§—ñ–Ω–∞–Ω—Å–∏ —Ç–∞ –±–∞–Ω–∫—ñ–≤—Å—å–∫–∞ —Å–ø—Ä–∞–≤–∞</label></div>
                    <div class="service-option"><label class="checkbox-wrapper"><input type="checkbox" name="industry" value="–û—Å–≤—ñ—Ç–∞" data-industry="education"><span class="checkmark"></span>–û—Å–≤—ñ—Ç–∞</label></div>
                    <div class="service-option"><label class="checkbox-wrapper"><input type="checkbox" name="industry" value="–¢—É—Ä–∏–∑–º —ñ –≥–æ—Å—Ç–∏–Ω–Ω—ñ—Å—Ç—å" data-industry="tourism"><span class="checkmark"></span>–¢—É—Ä–∏–∑–º —ñ –≥–æ—Å—Ç–∏–Ω–Ω—ñ—Å—Ç—å</label></div>
                    <div class="service-option"><label class="checkbox-wrapper"><input type="checkbox" name="industry" value="–ë—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–æ —Ç–∞ –Ω–µ—Ä—É—Ö–æ–º—ñ—Å—Ç—å" data-industry="construction"><span class="checkmark"></span>–ë—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–æ —Ç–∞ –Ω–µ—Ä—É—Ö–æ–º—ñ—Å—Ç—å</label></div>
                    <div class="service-option"><label class="checkbox-wrapper"><input type="checkbox" name="industry" value="–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç" data-industry="transport"><span class="checkmark"></span>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</label></div>
                    <div class="service-option"><label class="checkbox-wrapper"><input type="checkbox" name="industry" value="–ú–∏—Å—Ç–µ—Ü—Ç–≤–æ —ñ –∫—É–ª—å—Ç—É—Ä–∞" data-industry="art"><span class="checkmark"></span>–ú–∏—Å—Ç–µ—Ü—Ç–≤–æ —ñ –∫—É–ª—å—Ç—É—Ä–∞</label></div>
                    
                    <!-- Industry-specific skills sections -->
                    <div id="it-skills" class="industry-skills">
                        <h3>–ù–∞–≤–∏—á–∫–∏ –≤ –≥–∞–ª—É–∑—ñ –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ–π:</h3>
                        <div class="form-group">
                            <label for="it-skills-text">–û–ø–∏—à—ñ—Ç—å –≤–∞—à—ñ –Ω–∞–≤–∏—á–∫–∏ –≤ —Ü—ñ–π –≥–∞–ª—É–∑—ñ:</label>
                            <textarea id="it-skills-text" name="it-skills-text" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –†–æ–∑—Ä–æ–±–∫–∞ –≤–µ–±-—Å–∞–π—Ç—ñ–≤, –º–æ–±—ñ–ª—å–Ω–∏—Ö –¥–æ–¥–∞—Ç–∫—ñ–≤, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä—ñ–≤..." rows="4"></textarea>
                            <p class="hint" style="font-size: 0.8rem; color: #999; margin-top: 5px;">–ü—Ä–∏–∫–ª–∞–¥: –†–æ–∑—Ä–æ–±–∫–∞ –≤–µ–±-—Å–∞–π—Ç—ñ–≤, –º–æ–±—ñ–ª—å–Ω–∏—Ö –¥–æ–¥–∞—Ç–∫—ñ–≤, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä—ñ–≤...</p>
                        </div>
                    </div>
                    
                    <div id="medicine-skills" class="industry-skills">
                        <h3>–ù–∞–≤–∏—á–∫–∏ –≤ –≥–∞–ª—É–∑—ñ –ú–µ–¥–∏—Ü–∏–Ω–∏:</h3>
                        <div class="form-group">
                            <label for="medicine-skills-text">–û–ø–∏—à—ñ—Ç—å –≤–∞—à—ñ –Ω–∞–≤–∏—á–∫–∏ –≤ —Ü—ñ–π –≥–∞–ª—É–∑—ñ:</label>
                            <textarea id="medicine-skills-text" name="medicine-skills-text" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –¢–µ—Ä–∞–ø—ñ—è, —Ö—ñ—Ä—É—Ä–≥—ñ—è, –ø–µ–¥—ñ–∞—Ç—Ä—ñ—è..." rows="4"></textarea>
                            <p class="hint" style="font-size: 0.8rem; color: #999; margin-top: 5px;">–ü—Ä–∏–∫–ª–∞–¥: –¢–µ—Ä–∞–ø—ñ—è, —Ö—ñ—Ä—É—Ä–≥—ñ—è, –ø–µ–¥—ñ–∞—Ç—Ä—ñ—è...</p>
                        </div>
                    </div>
                    
                    <div id="energy-skills" class="industry-skills">
                        <h3>–ù–∞–≤–∏—á–∫–∏ –≤ –≥–∞–ª—É–∑—ñ –ï–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏:</h3>
                        <div class="form-group">
                            <label for="energy-skills-text">–û–ø–∏—à—ñ—Ç—å –≤–∞—à—ñ –Ω–∞–≤–∏—á–∫–∏ –≤ —Ü—ñ–π –≥–∞–ª—É–∑—ñ:</label>
                            <textarea id="energy-skills-text" name="energy-skills-text" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –í—ñ–¥–Ω–æ–≤–ª—é–≤–∞–Ω–∞ –µ–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞, –µ–ª–µ–∫—Ç—Ä–æ–µ–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞..." rows="4"></textarea>
                            <p class="hint" style="font-size: 0.8rem; color: #999; margin-top: 5px;">–ü—Ä–∏–∫–ª–∞–¥: –í—ñ–¥–Ω–æ–≤–ª—é–≤–∞–Ω–∞ –µ–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞, –µ–ª–µ–∫—Ç—Ä–æ–µ–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞...</p>
                        </div>
                    </div>
                    
                    <div id="agriculture-skills" class="industry-skills">
                        <h3>–ù–∞–≤–∏—á–∫–∏ –≤ –ê–≥—Ä–∞—Ä–Ω—ñ–π –≥–∞–ª—É–∑—ñ:</h3>
                        <div class="form-group">
                            <label for="agriculture-skills-text">–û–ø–∏—à—ñ—Ç—å –≤–∞—à—ñ –Ω–∞–≤–∏—á–∫–∏ –≤ —Ü—ñ–π –≥–∞–ª—É–∑—ñ:</label>
                            <textarea id="agriculture-skills-text" name="agriculture-skills-text" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –†–æ—Å–ª–∏–Ω–Ω–∏—Ü—Ç–≤–æ, —Ç–≤–∞—Ä–∏–Ω–Ω–∏—Ü—Ç–≤–æ, –∞–≥—Ä–æ–Ω–æ–º—ñ—è..." rows="4"></textarea>
                            <p class="hint" style="font-size: 0.8rem; color: #999; margin-top: 5px;">–ü—Ä–∏–∫–ª–∞–¥: –†–æ—Å–ª–∏–Ω–Ω–∏—Ü—Ç–≤–æ, —Ç–≤–∞—Ä–∏–Ω–Ω–∏—Ü—Ç–≤–æ, –∞–≥—Ä–æ–Ω–æ–º—ñ—è...</p>
                        </div>
                    </div>
                    
                    <div id="finance-skills" class="industry-skills">
                        <h3>–ù–∞–≤–∏—á–∫–∏ –≤ –≥–∞–ª—É–∑—ñ –§—ñ–Ω–∞–Ω—Å—ñ–≤ —Ç–∞ –±–∞–Ω–∫—ñ–≤—Å—å–∫–æ—ó —Å–ø—Ä–∞–≤–∏:</h3>
                        <div class="form-group">
                            <label for="finance-skills-text">–û–ø–∏—à—ñ—Ç—å –≤–∞—à—ñ –Ω–∞–≤–∏—á–∫–∏ –≤ —Ü—ñ–π –≥–∞–ª—É–∑—ñ:</label>
                            <textarea id="finance-skills-text" name="finance-skills-text" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –ë—É—Ö–≥–∞–ª—Ç–µ—Ä—Å—å–∫–∏–π –æ–±–ª—ñ–∫, —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –∞–Ω–∞–ª—ñ–∑..." rows="4"></textarea>
                            <p class="hint" style="font-size: 0.8rem; color: #999; margin-top: 5px;">–ü—Ä–∏–∫–ª–∞–¥: –ë—É—Ö–≥–∞–ª—Ç–µ—Ä—Å—å–∫–∏–π –æ–±–ª—ñ–∫, —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –∞–Ω–∞–ª—ñ–∑...</p>
                        </div>
                    </div>
                    
                    <div id="education-skills" class="industry-skills">
                        <h3>–ù–∞–≤–∏—á–∫–∏ –≤ –≥–∞–ª—É–∑—ñ –û—Å–≤—ñ—Ç–∏:</h3>
                        <div class="form-group">
                            <label for="education-skills-text">–û–ø–∏—à—ñ—Ç—å –≤–∞—à—ñ –Ω–∞–≤–∏—á–∫–∏ –≤ —Ü—ñ–π –≥–∞–ª—É–∑—ñ:</label>
                            <textarea id="education-skills-text" name="education-skills-text" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –í–∏–∫–ª–∞–¥–∞–Ω–Ω—è, —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä—Å—Ç–≤–æ, —Ä–æ–∑—Ä–æ–±–∫–∞ –Ω–∞–≤—á–∞–ª—å–Ω–∏—Ö –ø—Ä–æ–≥—Ä–∞–º..." rows="4"></textarea>
                            <p class="hint" style="font-size: 0.8rem; color: #999; margin-top: 5px;">–ü—Ä–∏–∫–ª–∞–¥: –í–∏–∫–ª–∞–¥–∞–Ω–Ω—è, —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä—Å—Ç–≤–æ, —Ä–æ–∑—Ä–æ–±–∫–∞ –Ω–∞–≤—á–∞–ª—å–Ω–∏—Ö –ø—Ä–æ–≥—Ä–∞–º...</p>
                        </div>
                    </div>
                    
                    <div id="tourism-skills" class="industry-skills">
                        <h3>–ù–∞–≤–∏—á–∫–∏ –≤ –≥–∞–ª—É–∑—ñ –¢—É—Ä–∏–∑–º—É —ñ –≥–æ—Å—Ç–∏–Ω–Ω–æ—Å—Ç—ñ:</h3>
                        <div class="form-group">
                            <label for="tourism-skills-text">–û–ø–∏—à—ñ—Ç—å –≤–∞—à—ñ –Ω–∞–≤–∏—á–∫–∏ –≤ —Ü—ñ–π –≥–∞–ª—É–∑—ñ:</label>
                            <textarea id="tourism-skills-text" name="tourism-skills-text" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è —Ç—É—Ä—ñ–≤, –≥–æ—Ç–µ–ª—å–Ω–∏–π –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç..." rows="4"></textarea>
                            <p class="hint" style="font-size: 0.8rem; color: #999; margin-top: 5px;">–ü—Ä–∏–∫–ª–∞–¥: –û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è —Ç—É—Ä—ñ–≤, –≥–æ—Ç–µ–ª—å–Ω–∏–π –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç...</p>
                        </div>
                    </div>
                    
                    <div id="construction-skills" class="industry-skills">
                        <h3>–ù–∞–≤–∏—á–∫–∏ –≤ –≥–∞–ª—É–∑—ñ –ë—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–∞ —Ç–∞ –Ω–µ—Ä—É—Ö–æ–º–æ—Å—Ç—ñ:</h3>
                        <div class="form-group">
                            <label for="construction-skills-text">–û–ø–∏—à—ñ—Ç—å –≤–∞—à—ñ –Ω–∞–≤–∏—á–∫–∏ –≤ —Ü—ñ–π –≥–∞–ª—É–∑—ñ:</label>
                            <textarea id="construction-skills-text" name="construction-skills-text" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç—É–≤–∞–Ω–Ω—è, –±—É–¥—ñ–≤–µ–ª—å–Ω—ñ —Ä–æ–±–æ—Ç–∏..." rows="4"></textarea>
                            <p class="hint" style="font-size: 0.8rem; color: #999; margin-top: 5px;">–ü—Ä–∏–∫–ª–∞–¥: –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç—É–≤–∞–Ω–Ω—è, –±—É–¥—ñ–≤–µ–ª—å–Ω—ñ —Ä–æ–±–æ—Ç–∏...</p>
                        </div>
                    </div>
                    
                    <div id="transport-skills" class="industry-skills">
                        <h3>–ù–∞–≤–∏—á–∫–∏ –≤ –≥–∞–ª—É–∑—ñ –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç—É:</h3>
                        <div class="form-group">
                            <label for="transport-skills-text">–û–ø–∏—à—ñ—Ç—å –≤–∞—à—ñ –Ω–∞–≤–∏—á–∫–∏ –≤ —Ü—ñ–π –≥–∞–ª—É–∑—ñ:</label>
                            <textarea id="transport-skills-text" name="transport-skills-text" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –õ–æ–≥—ñ—Å—Ç–∏–∫–∞, –≤–∞–Ω—Ç–∞–∂–Ω—ñ –ø–µ—Ä–µ–≤–µ–∑–µ–Ω–Ω—è..." rows="4"></textarea>
                            <p class="hint" style="font-size: 0.8rem; color: #999; margin-top: 5px;">–ü—Ä–∏–∫–ª–∞–¥: –õ–æ–≥—ñ—Å—Ç–∏–∫–∞, –≤–∞–Ω—Ç–∞–∂–Ω—ñ –ø–µ—Ä–µ–≤–µ–∑–µ–Ω–Ω—è...</p>
                        </div>
                    </div>
                    
                    <div id="art-skills" class="industry-skills">
                        <h3>–ù–∞–≤–∏—á–∫–∏ –≤ –≥–∞–ª—É–∑—ñ –ú–∏—Å—Ç–µ—Ü—Ç–≤–∞ —ñ –∫—É–ª—å—Ç—É—Ä–∏:</h3>
                        <div class="form-group">
                            <label for="art-skills-text">–û–ø–∏—à—ñ—Ç—å –≤–∞—à—ñ –Ω–∞–≤–∏—á–∫–∏ –≤ —Ü—ñ–π –≥–∞–ª—É–∑—ñ:</label>
                            <textarea id="art-skills-text" name="art-skills-text" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –û–±—Ä–∞–∑–æ—Ç–≤–æ—Ä—á–µ –º–∏—Å—Ç–µ—Ü—Ç–≤–æ, –º—É–∑–∏–∫–∞, —Ç–µ–∞—Ç—Ä..." rows="4"></textarea>
                            <p class="hint" style="font-size: 0.8rem; color: #999; margin-top: 5px;">–ü—Ä–∏–∫–ª–∞–¥: –û–±—Ä–∞–∑–æ—Ç–≤–æ—Ä—á–µ –º–∏—Å—Ç–µ—Ü—Ç–≤–æ, –º—É–∑–∏–∫–∞, —Ç–µ–∞—Ç—Ä...</p>
                        </div>
                    </div>
                    
                    <div class="form-group custom-skills" style="margin-top: 20px;">
                        <label for="custom-skills">–Ü–Ω—à—ñ –Ω–∞–≤–∏—á–∫–∏ (–≤–∫–∞–∂—ñ—Ç—å —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ):</label>
                        <textarea id="custom-skills" name="custom-skills" placeholder="–í–∫–∞–∂—ñ—Ç—å —ñ–Ω—à—ñ –Ω–∞–≤–∏—á–∫–∏, —è–∫—ñ —É –≤–∞—Å —î, –∞–ª–µ –Ω–µ –∑–∞–∑–Ω–∞—á–µ–Ω—ñ –≤–∏—â–µ..." rows="4"></textarea>
                    </div>

                    <button type="button" id="save-services"><i class="fas fa-save"></i> –ó–±–µ—Ä–µ–≥—Ç–∏ –ø–æ—Å–ª—É–≥–∏</button>
                </div>
            </div>

            <div id="tab-orders" class="tab-content">
                <div class="loading-container" id="orders-loading">
                    <div class="loading-spinner"></div>
                </div>
                <div class="orders-container" id="orders-container"></div>
            </div>

            <div id="tab-reviews" class="tab-content">
                <div class="loading-container" id="reviews-loading">
                    <div class="loading-spinner"></div>
                </div>
                <div class="reviews-container" id="reviews-container"></div>
            </div>

            <div id="tab-settings" class="tab-content">
                <h3>–ó–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–æ–ª—å</h3>
                <form id="password-form">
                    <div class="form-group">
                        <label for="current-password">–ü–æ—Ç–æ—á–Ω–∏–π –ø–∞—Ä–æ–ª—å:</label>
                        <input type="password" id="current-password" name="current-password" required />
                    </div>

                    <div class="form-group">
                        <label for="new-password">–ù–æ–≤–∏–π –ø–∞—Ä–æ–ª—å:</label>
                        <input type="password" id="new-password" name="new-password" required />
                        <div class="password-strength" id="password-strength"></div>
                        <div class="password-requirements">
                            <div class="requirement" id="req-length"><i class="fas fa-circle"></i> –ú—ñ–Ω—ñ–º—É–º 8 —Å–∏–º–≤–æ–ª—ñ–≤</div>
                            <div class="requirement" id="req-uppercase"><i class="fas fa-circle"></i> –ú—ñ–Ω—ñ–º—É–º 1 –≤–µ–ª–∏–∫–∞ –ª—ñ—Ç–µ—Ä–∞</div>
                            <div class="requirement" id="req-lowercase"><i class="fas fa-circle"></i> –ú—ñ–Ω—ñ–º—É–º 1 –º–∞–ª–∞ –ª—ñ—Ç–µ—Ä–∞</div>
                            <div class="requirement" id="req-number"><i class="fas fa-circle"></i> –ú—ñ–Ω—ñ–º—É–º 1 —Ü–∏—Ñ—Ä–∞</div>
                            <div class="requirement" id="req-special"><i class="fas fa-circle"></i> –ú—ñ–Ω—ñ–º—É–º 1 —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π —Å–∏–º–≤–æ–ª</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="confirm-password">–ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å:</label>
                        <input type="password" id="confirm-password" name="confirm-password" required />
                    </div>

                    <button type="submit"><i class="fas fa-key"></i> –ó–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–æ–ª—å</button>
                </form>

                <h3 style="margin-top: 30px;">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å</h3>
                <div class="form-group">
                    <label class="checkbox-wrapper">
                        <input type="checkbox" id="email-notifications" name="email-notifications" checked />
                        <span class="checkmark"></span>
                        –û—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –Ω–∞ –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É –ø–æ—à—Ç—É
                    </label>
                </div>

                <div class="form-group">
                    <label class="checkbox-wrapper">
                        <input type="checkbox" id="order-notifications" name="order-notifications" checked />
                        <span class="checkmark"></span>
                        –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –Ω–æ–≤—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
                    </label>
                </div>

                <div class="form-group">
                    <label class="checkbox-wrapper">
                        <input type="checkbox" id="review-notifications" name="review-notifications" checked />
                        <span class="checkmark"></span>
                        –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –Ω–æ–≤—ñ –≤—ñ–¥–≥—É–∫–∏
                    </label>
                </div>

                <button type="button" id="save-settings"><i class="fas fa-save"></i> –ó–±–µ—Ä–µ–≥—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</button>
            </div>

            <div id="error-message" style="display: none;"></div>
            <div id="success-message" style="display: none;"></div>
        </main>
    </div>

    <script>
        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        const htmlElement = document.documentElement;
        
        // Check for saved theme preference
        if (localStorage.getItem('theme') === 'light') {
            htmlElement.classList.remove('dark');
            htmlElement.classList.add('light');
            themeToggle.checked = true;
        }
        
        // Toggle theme when switch is clicked
        themeToggle.addEventListener('change', function() {
            if (this.checked) {
                htmlElement.classList.remove('dark');
                htmlElement.classList.add('light');
                localStorage.setItem('theme', 'light');
            } else {
                htmlElement.classList.remove('light');
                htmlElement.classList.add('dark');
                localStorage.setItem('theme', 'dark');
            }
        });

        // Tab functionality
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                // Remove active class from all tabs
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked tab
                this.classList.add('active');
                
                // Show corresponding content
                const tabName = this.getAttribute('data-tab');
                document.getElementById(`tab-${tabName}`).classList.add('active');
                
                // Load content based on tab
                if (tabName === 'orders') {
                    loadUserOrders();
                } else if (tabName === 'reviews') {
                    loadUserReviews();
                } else if (tabName === 'services') {
                    loadUserServices(getUserId());
                }
            });
        });

        // Function to get user ID
        function getUserId() {
            const userId = localStorage.getItem('userId');
            if (userId) {
                return userId;
            }
            
            const urlParams = new URLSearchParams(window.location.search);
            const urlUserId = urlParams.get('userId');
            
            if (urlUserId) {
                localStorage.setItem('userId', urlUserId);
                return urlUserId;
            }
            
            alert('–ù–µ–æ–±—Ö—ñ–¥–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—è');
            window.location.href = '/auth.html';
            return null;
        }

        // Function to load user profile
        async function loadUserProfile() {
            const userId = getUserId();
            if (!userId) return;
            
            try {
                const response = await fetch(`/profile/${userId}`);
                
                if (!response.ok) {
                    throw new Error('–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å');
                }
                
                const data = await response.json();
                
                if (data.profile) {
                    // Update profile header
                    updateProfileHeader(data.profile);
                    
                    // Update form fields
                    document.getElementById("first_name").value = data.profile.first_name || '';
                    document.getElementById("last_name").value = data.profile.last_name || '';
                    document.getElementById("email").value = data.profile.email || '';
                    document.getElementById("phone").value = data.profile.phone || '';
                    document.getElementById("address").value = data.profile.address || '';
                    document.getElementById("bio").value = data.profile.bio || '';
                    
                    if (data.profile.date_of_birth) {
                        const date = new Date(data.profile.date_of_birth);
                        const formattedDate = date.toISOString().split('T')[0];
                        document.getElementById("date_of_birth").value = formattedDate;
                    }
                    
                    document.getElementById("role_master").checked = data.profile.role_master || false;
                    
                    // Display approval status if available
                    if (data.profile.approval_status) {
                        const statusElement = document.getElementById('approval-status');
                        statusElement.textContent = getStatusText(data.profile.approval_status);
                        statusElement.className = `status-${data.profile.approval_status}`;
                    }
                    
                    // Update notification badge
                    if (data.unreadNotifications > 0) {
                        const notificationBadge = document.getElementById('notifications-btn');
                        notificationBadge.setAttribute('data-count', data.unreadNotifications);
                        notificationBadge.classList.add('has-notifications');
                    }
                    
                    // Update stats
                    document.getElementById('rating-value').textContent = data.profile.rating || '0.0';
                    document.getElementById('reviews-count').textContent = data.profile.reviews_count || '0';
                    document.getElementById('orders-count').textContent = data.ordersCount || '0';
                }
            } catch (error) {
                showError(error.message);
            }
        }
        
        // Function to update profile header
        function updateProfileHeader(profile) {
            // Set profile name
            const profileName = document.getElementById('profile-name');
            profileName.textContent = profile.first_name && profile.last_name 
                ? `${profile.first_name} ${profile.last_name}`
                : profile.username;
            
            // Set username
            document.getElementById('profile-username').textContent = `@${profile.username}`;
            
            // Set avatar initials
            const avatarInitials = document.getElementById('avatar-initials');
            if (profile.first_name && profile.last_name) {
                avatarInitials.textContent = `${profile.first_name.charAt(0)}${profile.last_name.charAt(0)}`;
            } else {
                avatarInitials.textContent = profile.username.charAt(0).toUpperCase();
            }
            
            // Set avatar image if available
            if (profile.profile_image_url) {
                const avatarImage = document.getElementById('avatar-image');
                avatarImage.src = profile.profile_image_url;
                avatarImage.style.display = 'block';
                avatarInitials.style.display = 'none';
            }
        }
        
        function getStatusText(status) {
            switch(status) {
                case 'pending': return '–ù–∞ —Ä–æ–∑–≥–ª—è–¥—ñ';
                case 'approved': return '–ó–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ';
                case 'rejected': return '–í—ñ–¥—Ö–∏–ª–µ–Ω–æ';
                default: return '';
            }
        }
        
        // Function to load user services
        async function loadUserServices(userId) {
            try {
                const response = await fetch(`/services/${userId}`);
                
                if (!response.ok) {
                    throw new Error('–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –ø–æ—Å–ª—É–≥–∏');
                }
                
                const data = await response.json();
                
                if (data.services && data.services.length > 0) {
                    // Reset all checkboxes
                    document.querySelectorAll('#services input[type="checkbox"]').forEach(checkbox => {
                        checkbox.checked = false;
                    });
                    
                    // Clear all textareas
                    document.querySelectorAll('#services textarea').forEach(textarea => {
                        textarea.value = '';
                    });
                    
                    const selectedIndustries = [];
                    
                    data.services.forEach(service => {
                        if (service.service_type === 'industry') {
                            const checkbox = Array.from(document.querySelectorAll('#services input[name="industry"]'))
                                .find(cb => cb.value === service.service_name);
                            
                            if (checkbox) {
                                checkbox.checked = true;
                                selectedIndustries.push(checkbox.dataset.industry);
                            }
                        } else if (service.service_type.endsWith('-skills-text')) {
                            const textarea = document.getElementById(service.service_type);
                            if (textarea) {
                                textarea.value = service.service_name;
                            }
                        } else if (service.service_type === 'custom-skills') {
                            document.getElementById('custom-skills').value = service.service_name;
                        }
                    });
                    
                    // Show industry-specific skills sections
                    selectedIndustries.forEach(industry => {
                        const skillsSection = document.getElementById(`${industry}-skills`);
                        if (skillsSection) {
                            skillsSection.classList.add('visible');
                            // Add random animation class for initial load
                            const animations = ['slide-in-right', 'slide-in-left', 'slide-in-top', 'slide-in-bottom'];
                            const randomAnimation = animations[Math.floor(Math.random() * animations.length)];
                            skillsSection.classList.add(randomAnimation);
                        }
                    });
                }
            } catch (error) {
                showError(error.message);
            }
        }
        
        // Function to load user orders
        async function loadUserOrders() {
            const userId = getUserId();
            if (!userId) return;
            
            const ordersContainer = document.getElementById('orders-container');
            const loadingElement = document.getElementById('orders-loading');
            
            ordersContainer.innerHTML = '';
            loadingElement.style.display = 'flex';
            
            try {
                const response = await fetch(`/orders/user/${userId}`);
                
                if (!response.ok) {
                    throw new Error('–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è');
                }
                
                const data = await response.json();
                
                loadingElement.style.display = 'none';
                
                if (data.orders && data.orders.length > 0) {
                    // Update orders count
                    document.getElementById('orders-count').textContent = data.orders.length;
                    
                    data.orders.forEach((order, index) => {
                        // Add animation delay based on index
                        const delay = index * 0.1;
                        
                        const orderCard = document.createElement('div');
                        orderCard.className = 'order-card';
                        orderCard.style.animationDelay = `${delay}s`;
                        
                        const statusClass = `status-${order.status}`;
                        const statusText = getOrderStatusText(order.status);
                        
                        orderCard.innerHTML = `
                            <div class="order-header">
                                <div class="order-number">${order.order_number}</div>
                                <div class="order-title">${order.title}</div>
                                <div class="order-status ${statusClass}">${statusText}</div>
                            </div>
                            <div class="order-body">
                                <div class="order-info">
                                    <div class="order-info-item">
                                        <div class="order-info-label">–ì–∞–ª—É–∑—å:</div>
                                        <div class="order-info-value">${order.industry || '–ù–µ –≤–∫–∞–∑–∞–Ω–æ'}</div>
                                    </div>
                                    <div class="order-info-item">
                                        <div class="order-info-label">–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è:</div>
                                        <div class="order-info-value">${formatDate(order.created_at)}</div>
                                    </div>
                                    <div class="order-info-item">
                                        <div class="order-info-label">–¶—ñ–Ω–∞:</div>
                                        <div class="order-info-value">${order.price ? `${order.price} –≥—Ä–Ω` : '–ó–∞ –¥–æ–º–æ–≤–ª–µ–Ω—ñ—Å—Ç—é'}</div>
                                    </div>
                                    <div class="order-info-item">
                                        <div class="order-info-label">–°—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç–∏:</div>
                                        <div class="order-info-value">${getPaymentStatusText(order.payment_status)}</div>
                                    </div>
                                </div>
                                <div class="order-actions">
                                    <button onclick="viewOrderDetails(${order.id})"><i class="fas fa-eye"></i> –î–µ—Ç–∞–ª—ñ</button>
                                    ${order.status === 'completed' ? 
                                        `<button onclick="leaveReview(${order.id}, ${order.master_id})"><i class="fas fa-star"></i> –í—ñ–¥–≥—É–∫</button>` : 
                                        ''}
                                    ${order.status === 'pending' ? 
                                        `<button onclick="cancelOrder(${order.id})"><i class="fas fa-times"></i> –°–∫–∞—Å—É–≤–∞—Ç–∏</button>` : 
                                        ''}
                                </div>
                            </div>
                        `;
                        
                        ordersContainer.appendChild(orderCard);
                    });
                } else {
                    ordersContainer.innerHTML = '<p style="text-align: center; padding: 30px;">–£ –≤–∞—Å —â–µ –Ω–µ–º–∞—î –∑–∞–º–æ–≤–ª–µ–Ω—å</p>';
                }
            } catch (error) {
                loadingElement.style.display = 'none';
                ordersContainer.innerHTML = `<p style="text-align: center; padding: 30px; color: var(--danger-color);">–ü–æ–º–∏–ª–∫–∞: ${error.message}</p>`;
            }
        }
        
        // Function to load user reviews
        async function loadUserReviews() {
            const userId = getUserId();
            if (!userId) return;
            
            const reviewsContainer = document.getElementById('reviews-container');
            const loadingElement = document.getElementById('reviews-loading');
            
            reviewsContainer.innerHTML = '';
            loadingElement.style.display = 'flex';
            
            try {
                const response = await fetch(`/reviews/master/${userId}`);
                
                if (!response.ok) {
                    throw new Error('–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—ñ–¥–≥—É–∫–∏');
                }
                
                const data = await response.json();
                
                loadingElement.style.display = 'none';
                
                if (data.reviews && data.reviews.length > 0) {
                    data.reviews.forEach((review, index) => {
                        // Add animation delay based on index
                        const delay = index * 0.1;
                        
                        const reviewCard = document.createElement('div');
                        reviewCard.className = 'review-card';
                        reviewCard.style.animationDelay = `${delay}s`;
                        
                        const reviewerName = review.user_first_name && review.user_last_name 
                            ? `${review.user_first_name} ${review.user_last_name}`
                            : review.user_username;
                        
                        const reviewerInitials = review.user_first_name && review.user_last_name
                            ? `${review.user_first_name.charAt(0)}${review.user_last_name.charAt(0)}`
                            : review.user_username.charAt(0).toUpperCase();
                        
                        reviewCard.innerHTML = `
                            <div class="review-header">
                                <div class="reviewer-info">
                                    <div class="reviewer-avatar">${reviewerInitials}</div>
                                    <div>
                                        <div class="reviewer-name">${reviewerName}</div>
                                        <div class="review-date">${formatDate(review.created_at)}</div>
                                    </div>
                                </div>
                                <div class="review-rating">
                                    ${generateStarRating(review.rating)}
                                </div>
                            </div>
                            <div class="review-content">
                                ${review.comment || '–ë–µ–∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—è'}
                            </div>
                            <div class="review-order">
                                –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è: ${review.order_title} (${review.order_number})
                            </div>
                        `;
                        
                        reviewsContainer.appendChild(reviewCard);
                    });
                } else {
                    reviewsContainer.innerHTML = '<p style="text-align: center; padding: 30px;">–£ –≤–∞—Å —â–µ –Ω–µ–º–∞—î –≤—ñ–¥–≥—É–∫—ñ–≤</p>';
                }
            } catch (error) {
                loadingElement.style.display = 'none';
                reviewsContainer.innerHTML = `<p style="text-align: center; padding: 30px; color: var(--danger-color);">–ü–æ–º–∏–ª–∫–∞: ${error.message}</p>`;
            }
        }
        
        // Helper function to generate star rating
        function generateStarRating(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= rating) {
                    stars += '<i class="fas fa-star"></i>';
                } else if (i - 0.5 <= rating) {
                    stars += '<i class="fas fa-star-half-alt"></i>';
                } else {
                    stars += '<i class="far fa-star"></i>';
                }
            }
            return stars;
        }
        
        // Helper function to format date
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('uk-UA', { 
                day: '2-digit', 
                month: '2-digit', 
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }
        
        // Helper function to get order status text
        function getOrderStatusText(status) {
            switch(status) {
                case 'pending': return '–û—á—ñ–∫—É—î';
                case 'approved': return '–ü—Ä–∏–π–Ω—è—Ç–æ';
                case 'completed': return '–í–∏–∫–æ–Ω–∞–Ω–æ';
                case 'cancelled': return '–°–∫–∞—Å–æ–≤–∞–Ω–æ';
                case 'rejected': return '–í—ñ–¥—Ö–∏–ª–µ–Ω–æ';
                default: return status;
            }
        }
        
        // Helper function to get payment status text
        function getPaymentStatusText(status) {
            switch(status) {
                case 'unpaid': return '–ù–µ –æ–ø–ª–∞—á–µ–Ω–æ';
                case 'paid': return '–û–ø–ª–∞—á–µ–Ω–æ';
                case 'refunded': return '–ü–æ–≤–µ—Ä–Ω—É—Ç–æ';
                default: return status || '–ù–µ –æ–ø–ª–∞—á–µ–Ω–æ';
            }
        }
        
        // Function to show error message
        function showError(message) {
            const errorElement = document.getElementById('error-message');
            errorElement.innerHTML = `<i class="fas fa-exclamation-circle"></i> ${message}`;
            errorElement.style.display = 'flex';
            
            setTimeout(() => {
                errorElement.style.animation = 'fadeInScale 0.4s ease-out reverse';
                setTimeout(() => {
                    errorElement.style.display = 'none';
                    errorElement.style.animation = '';
                }, 400);
            }, 5000);
        }
        
        // Function to show success message
        function showSuccess(message) {
            const successElement = document.getElementById('success-message');
            successElement.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;
            successElement.style.display = 'flex';
            
            setTimeout(() => {
                successElement.style.animation = 'fadeInScale 0.4s ease-out reverse';
                setTimeout(() => {
                    successElement.style.display = 'none';
                    successElement.style.animation = '';
                }, 400);
            }, 5000);
        }

        // Form submission handler
        document.getElementById("profile-form").addEventListener("submit", async function (event) {
            event.preventDefault();
            
            const userId = getUserId();
            if (!userId) return;
            
            const formData = {
                first_name: document.getElementById("first_name").value,
                last_name: document.getElementById("last_name").value,
                email: document.getElementById("email").value,
                phone: document.getElementById("phone").value,
                address: document.getElementById("address").value,
                date_of_birth: document.getElementById("date_of_birth").value,
                bio: document.getElementById("bio").value,
                role_master: document.getElementById("role_master").checked,
                approval_status: document.getElementById("role_master").checked ? 'pending' : null
            };
            
            try {
                const profileResponse = await fetch(`/profile/${userId}`, {
                    method: "PUT",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(formData)
                });
                
                if (!profileResponse.ok) {
                    const errorData = await profileResponse.json();
                    throw new Error(errorData.message || '–ù–µ –≤–¥–∞–ª–æ—Å—è –æ–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å');
                }
                
                // Update profile header
                updateProfileHeader({
                    first_name: formData.first_name,
                    last_name: formData.last_name,
                    username: document.getElementById('profile-username').textContent.substring(1)
                });
                
                if (formData.role_master) {
                    // Create master request if not already created
                    try {
                        await fetch(`/master-requests`, {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({ 
                                user_id: userId,
                                status: 'pending'
                            })
                        });
                        
                        // Update approval status display
                        const statusElement = document.getElementById('approval-status');
                        statusElement.textContent = '–ù–∞ —Ä–æ–∑–≥–ª—è–¥—ñ';
                        statusElement.className = 'status-pending';
                    } catch (err) {
                        // Ignore error if request already exists
                        console.log("Master request may already exist:", err);
                    }
                }
                
                showSuccess('–ü—Ä–æ—Ñ—ñ–ª—å —É—Å–ø—ñ—à–Ω–æ –æ–Ω–æ–≤–ª–µ–Ω–æ!');
            } catch (error) {
                showError(error.message);
            }
        });

        // Save services handler
        document.getElementById("save-services").addEventListener("click", async function () {
            const userId = getUserId();
            if (!userId) return;
            
            try {
                // Get selected industries
                const selectedIndustries = Array.from(
                    document.querySelectorAll('#services input[name="industry"]:checked')
                ).map(checkbox => ({
                    name: checkbox.value,
                    type: 'industry',
                    industry: checkbox.dataset.industry
                }));
                
                // Get skills texts for each selected industry
                const skillsTexts = [];
                selectedIndustries.forEach(industry => {
                    const textareaId = `${industry.industry}-skills-text`;
                    const textarea = document.getElementById(textareaId);
                    if (textarea && textarea.value.trim()) {
                        skillsTexts.push({
                            name: textarea.value,
                            type: textareaId
                        });
                    }
                });
                
                // Get custom skills
                const customSkills = document.getElementById('custom-skills').value;
                
                // Delete existing services
                const servicesResponse = await fetch(`/services/${userId}`);
                const servicesData = await servicesResponse.json();
                
                if (servicesData.services && servicesData.services.length > 0) {
                    for (const service of servicesData.services) {
                        await fetch(`/services/${service.id}`, {
                            method: "DELETE"
                        });
                    }
                }
                
                // Add industries
                for (const industry of selectedIndustries) {
                    await fetch(`/services/${userId}`, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ 
                            service_name: industry.name,
                            service_type: industry.type
                        })
                    });
                }
                
                // Add skills texts
                for (const skill of skillsTexts) {
                    await fetch(`/services/${userId}`, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ 
                            service_name: skill.name,
                            service_type: skill.type
                        })
                    });
                }
                
                // Add custom skills
                if (customSkills.trim()) {
                    await fetch(`/services/${userId}`, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ 
                            service_name: customSkills,
                            service_type: 'custom-skills'
                        })
                    });
                }
                
                showSuccess('–ü–æ—Å–ª—É–≥–∏ —É—Å–ø—ñ—à–Ω–æ –∑–±–µ—Ä–µ–∂–µ–Ω–æ!');
            } catch (error) {
                showError(error.message);
            }
        });

        // Add animation for services toggle
        document.getElementById("role_master").addEventListener("change", function () {
            const servicesDiv = document.getElementById("services");
            if (this.checked) {
                servicesDiv.style.display = "block";
                setTimeout(() => {
                    servicesDiv.classList.add("visible");
                }, 10);
            } else {
                servicesDiv.classList.remove("visible");
                setTimeout(() => {
                    servicesDiv.style.display = "none";
                }, 400);
                
                // Hide all industry skills sections
                document.querySelectorAll('.industry-skills').forEach(section => {
                    section.classList.add('fade-out');
                    setTimeout(() => {
                        section.classList.remove('visible');
                        section.classList.remove('fade-out');
                        section.classList.remove('slide-in-right', 'slide-in-left', 'slide-in-top', 'slide-in-bottom');
                    }, 400);
                });
            }
        });
        
        // Enhanced transitions for industry checkboxes
        let lastActiveIndustry = null;
        
        document.querySelectorAll('input[name="industry"]').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const industry = this.dataset.industry;
                const skillsSection = document.getElementById(`${industry}-skills`);
                
                if (this.checked && skillsSection) {
                    // Determine animation direction based on position in the list
                    const allIndustries = Array.from(document.querySelectorAll('input[name="industry"]'));
                    const currentIndex = allIndustries.indexOf(this);
                    
                    // Remove all animation classes first
                    skillsSection.classList.remove('slide-in-right', 'slide-in-left', 'slide-in-top', 'slide-in-bottom');
                    
                    // Add appropriate animation class
                    if (lastActiveIndustry) {
                        const lastIndex = allIndustries.findIndex(cb => cb.dataset.industry === lastActiveIndustry);
                        
                        if (currentIndex > lastIndex) {
                            skillsSection.classList.add('slide-in-right');
                        } else {
                            skillsSection.classList.add('slide-in-left');
                        }
                    } else {
                        skillsSection.classList.add('slide-in-bottom');
                    }
                    
                    // Show the section with animation
                    skillsSection.classList.add('visible');
                    lastActiveIndustry = industry;
                    
                } else if (skillsSection) {
                    // Add fade out animation
                    skillsSection.classList.add('fade-out');
                    
                    // Remove the section after animation completes
                    setTimeout(() => {
                        skillsSection.classList.remove('visible');
                        skillsSection.classList.remove('fade-out');
                        skillsSection.classList.remove('slide-in-right', 'slide-in-left', 'slide-in-top', 'slide-in-bottom');
                        
                        // Update last active industry
                        const activeCheckboxes = Array.from(document.querySelectorAll('input[name="industry"]:checked'));
                        if (activeCheckboxes.length > 0) {
                            lastActiveIndustry = activeCheckboxes[activeCheckboxes.length - 1].dataset.industry;
                        } else {
                            lastActiveIndustry = null;
                        }
                    }, 400);
                }
            });
        });

        // Avatar upload functionality
        document.getElementById('avatar-upload').addEventListener('click', function() {
            document.getElementById('avatar-input').click();
        });
        
        document.getElementById('avatar-input').addEventListener('change', async function(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Check file type
            if (!file.type.startsWith('image/')) {
                showError('–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–∏–±–µ—Ä—ñ—Ç—å –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è');
                return;
            }
            
            // Check file size (max 5MB)
            if (file.size > 5 * 1024 * 1024) {
                showError('–†–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω –ø–µ—Ä–µ–≤–∏—â—É–≤–∞—Ç–∏ 5MB');
                return;
            }
            
            // Create FormData
            const formData = new FormData();
            formData.append('avatar', file);
            
            try {
                const userId = getUserId();
                if (!userId) return;
                
                // Upload avatar
                const response = await fetch(`/upload-avatar/${userId}`, {
                    method: 'POST',
                    body: formData
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.message || '–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∞–≤–∞—Ç–∞—Ä');
                }
                
                const data = await response.json();
                
                // Update avatar image
                const avatarImage = document.getElementById('avatar-image');
                avatarImage.src = data.imageUrl;
                avatarImage.style.display = 'block';
                document.getElementById('avatar-initials').style.display = 'none';
                
                // Update profile with new image URL
                await fetch(`/profile/${userId}`, {
                    method: "PUT",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ profile_image_url: data.imageUrl })
                });
                
                showSuccess('–ê–≤–∞—Ç–∞—Ä —É—Å–ø—ñ—à–Ω–æ –æ–Ω–æ–≤–ª–µ–Ω–æ!');
            } catch (error) {
                showError(error.message);
            }
        });

        // Password strength checker
        document.getElementById('new-password').addEventListener('input', function() {
            const password = this.value;
            const strengthBar = document.getElementById('password-strength');
            
            // Check requirements
            const hasLength = password.length >= 8;
            const hasUppercase = /[A-Z]/.test(password);
            const hasLowercase = /[a-z]/.test(password);
            const hasNumber = /[0-9]/.test(password);
            const hasSpecial = /[^A-Za-z0-9]/.test(password);
            
            // Update requirement indicators
            updateRequirement('req-length', hasLength);
            updateRequirement('req-uppercase', hasUppercase);
            updateRequirement('req-lowercase', hasLowercase);
            updateRequirement('req-number', hasNumber);
            updateRequirement('req-special', hasSpecial);
            
            // Calculate strength
            let strength = 0;
            if (hasLength) strength += 1;
            if (hasUppercase) strength += 1;
            if (hasLowercase) strength += 1;
            if (hasNumber) strength += 1;
            if (hasSpecial) strength += 1;
            
            // Update strength bar
            strengthBar.className = 'password-strength';
            if (strength < 3) {
                strengthBar.classList.add('password-strength-weak');
            } else if (strength < 5) {
                strengthBar.classList.add('password-strength-medium');
            } else {
                strengthBar.classList.add('password-strength-strong');
            }
        });
        
        function updateRequirement(id, isMet) {
            const element = document.getElementById(id);
            if (isMet) {
                element.classList.add('requirement-met');
                element.classList.remove('requirement-unmet');
                element.querySelector('i').className = 'fas fa-check-circle';
            } else {
                element.classList.add('requirement-unmet');
                element.classList.remove('requirement-met');
                element.querySelector('i').className = 'fas fa-times-circle';
            }
        }
        
        // Password change form handler
        document.getElementById('password-form').addEventListener('submit', async function(event) {
            event.preventDefault();
            
            const currentPassword = document.getElementById('current-password').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            
            if (newPassword !== confirmPassword) {
                showError('–ü–∞—Ä–æ–ª—ñ –Ω–µ —Å–ø—ñ–≤–ø–∞–¥–∞—é—Ç—å');
                return;
            }
            
            // Check password strength
            const hasLength = newPassword.length >= 8;
            const hasUppercase = /[A-Z]/.test(newPassword);
            const hasLowercase = /[a-z]/.test(newPassword);
            const hasNumber = /[0-9]/.test(newPassword);
            const hasSpecial = /[^A-Za-z0-9]/.test(newPassword);
            
            if (!(hasLength && hasUppercase && hasLowercase && hasNumber && hasSpecial)) {
                showError('–ü–∞—Ä–æ–ª—å –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –≤–∏–º–æ–≥–∞–º –±–µ–∑–ø–µ–∫–∏');
                return;
            }
            
            try {
                const userId = getUserId();
                if (!userId) return;
                
                const response = await fetch(`/change-password/${userId}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        currentPassword,
                        newPassword
                    })
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.message || '–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–æ–ª—å');
                }
                
                showSuccess('–ü–∞—Ä–æ–ª—å —É—Å–ø—ñ—à–Ω–æ –∑–º—ñ–Ω–µ–Ω–æ!');
                
                // Clear form
                document.getElementById('current-password').value = '';
                document.getElementById('new-password').value = '';
                document.getElementById('confirm-password').value = '';
                
                // Reset strength bar
                document.getElementById('password-strength').className = 'password-strength';
                
                // Reset requirements
                document.querySelectorAll('.requirement').forEach(req => {
                    req.classList.remove('requirement-met', 'requirement-unmet');
                    req.querySelector('i').className = 'fas fa-circle';
                });
            } catch (error) {
                showError(error.message);
            }
        });
        
        // Save settings handler
        document.getElementById('save-settings').addEventListener('click', async function() {
            const userId = getUserId();
            if (!userId) return;
            
            const settings = {
                email_notifications: document.getElementById('email-notifications').checked,
                order_notifications: document.getElementById('order-notifications').checked,
                review_notifications: document.getElementById('review-notifications').checked
            };
            
            try {
                const response = await fetch(`/user-settings/${userId}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(settings)
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.message || '–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–±–µ—Ä–µ–≥—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è');
                }
                
                showSuccess('–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ –∑–±–µ—Ä–µ–∂–µ–Ω–æ!');
            } catch (error) {
                showError(error.message);
            }
        });
        
        // Order action functions
        window.viewOrderDetails = function(orderId) {
            window.location.href = `/order-details.html?id=${orderId}`;
        };
        
        window.leaveReview = function(orderId, masterId) {
            window.location.href = `/leave-review.html?orderId=${orderId}&masterId=${masterId}`;
        };
        
        window.cancelOrder = async function(orderId) {
            if (!confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ —Å–∫–∞—Å—É–≤–∞—Ç–∏ —Ü–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è?')) {
                return;
            }
            
            try {
                const response = await fetch(`/orders/${orderId}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ status: 'cancelled' })
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.message || '–ù–µ –≤–¥–∞–ª–æ—Å—è —Å–∫–∞—Å—É–≤–∞—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è');
                }
                
                showSuccess('–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ —Å–∫–∞—Å–æ–≤–∞–Ω–æ!');
                
                // Reload orders
                setTimeout(() => {
                    loadUserOrders();
                }, 1000);
            } catch (error) {
                showError(error.message);
            }
        };

        // Logout handler
        document.getElementById("logout").addEventListener("click", function (event) {
            event.preventDefault();
            localStorage.removeItem('userId');
            localStorage.removeItem('token');
            window.location.href = "/auth.html";
        });

        // Load profile on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadUserProfile();
            
            // Check if we need to show a specific tab based on URL parameter
            const urlParams = new URLSearchParams(window.location.search);
            const tab = urlParams.get('tab');
            
            if (tab) {
                const tabElement = document.querySelector(`.tab[data-tab="${tab}"]`);
                if (tabElement) {
                    tabElement.click();
                }
            }
        });
    </script>
</body>
</html>
